<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediksi Performa Industri Manufaktur</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 35px;
            padding: 25px;
            border: 2px solid #f8f9fa;
            border-radius: 10px;
            background: #fafbfc;
        }

        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            font-weight: 600;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            color: #34495e;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        input, select, textarea {
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        input:hover, select:hover {
            border-color: #bdc3c7;
        }

        .input-group {
            position: relative;
        }

        .input-suffix {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
            font-size: 0.9rem;
            pointer-events: none;
        }

        .submit-container {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #ecf0f1;
        }

        .submit-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .reset-btn {
            background: #95a5a6;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            margin-left: 15px;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: #7f8c8d;
        }

        .info-text {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 5px;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .form-section {
                padding: 20px;
            }
        }

        .required {
            color: #e74c3c;
        }

        .prediction-result {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            border-radius: 10px;
            text-align: center;
        }

        .prediction-result h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .prediction-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 15px 0;
        }

        .help-modal {
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    backdrop-filter: blur(5px);
}

.help-modal-content {
    background-color: white;
    margin: 2% auto;
    border-radius: 15px;
    width: 90%;
    max-width: 900px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from { opacity: 0; transform: translateY(-50px); }
    to { opacity: 1; transform: translateY(0); }
}

.help-header {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    color: white;
    padding: 25px 30px;
    border-radius: 15px 15px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.help-header h2 {
    margin: 0;
    font-size: 1.8rem;
}

.help-close {
    font-size: 2rem;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 50%;
    transition: background 0.3s ease;
}

.help-close:hover {
    background: rgba(255,255,255,0.2);
}

.help-body {
    padding: 30px;
    max-height: 70vh;
    overflow-y: auto;
}

.help-section {
    margin-bottom: 35px;
    padding: 25px;
    border: 2px solid #f1f2f6;
    border-radius: 12px;
    background: #fafbfc;
}

.help-section h3 {
    color: #2c3e50;
    margin-bottom: 20px;
    font-size: 1.3rem;
    padding-bottom: 10px;
    border-bottom: 2px solid #3498db;
}

.quick-steps {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.step {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.step-number {
    background: #3498db;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.field-help {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.field-item {
    padding: 15px;
    background: white;
    border-radius: 8px;
    border-left: 4px solid #3498db;
}

.field-item strong {
    color: #2c3e50;
    display: block;
    margin-bottom: 8px;
}

.field-item p {
    margin-bottom: 10px;
    color: #555;
}

.field-item ul {
    margin: 10px 0;
    padding-left: 20px;
}

.field-item li {
    margin-bottom: 5px;
}

.example {
    background: #e8f5e8;
    padding: 10px;
    border-radius: 6px;
    border-left: 3px solid #27ae60;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    margin-top: 10px;
}

.formula {
    background: #fff3cd;
    padding: 10px;
    border-radius: 6px;
    border-left: 3px solid #ffc107;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    margin: 10px 0;
}

.auto-calc {
    background: #d1ecf1;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #17a2b8;
    margin-top: 15px;
}

.tips-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.tip-item {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.tip-item strong {
    color: #2c3e50;
    display: block;
    margin-bottom: 10px;
}

.tip-item ul {
    margin: 0;
    padding-left: 20px;
}

.tip-item li {
    margin-bottom: 5px;
    color: #555;
}

.checklist {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.checklist label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.checklist label:hover {
    background: #f8f9fa;
}

.checklist input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #3498db;
}

.required {
    color: #e74c3c;
    font-weight: 600;
}

@media (max-width: 768px) {
    .help-modal-content {
        width: 95%;
        margin: 5% auto;
    }
    
    .help-header {
        padding: 20px;
    }
    
    .help-header h2 {
        font-size: 1.5rem;
    }
    
    .help-body {
        padding: 20px;
    }
    
    .tips-grid {
        grid-template-columns: 1fr;
    }
    
    .quick-steps .step {
        flex-direction: column;
        text-align: center;
    }
}
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè≠ Prediksi Performa Industri Manufaktur</h1>
            <p>Sistem Prediksi Berbasis Machine Learning untuk Analisis Performa Manufaktur</p>
            <div style="margin-top: 20px;">
    <button type="button" id="helpButton" onclick="toggleHelpModal()" style="
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid rgba(255,255,255,0.3);
        padding: 10px 20px;
        border-radius: 25px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
        ‚ùì Bantuan Pengisian Form
    </button>
</div>
        </div>

        <div class="form-container">
            <form id="manufacturingForm" onsubmit="handleSubmit(event)">
                
                <!-- Informasi Perusahaan -->
                <div class="form-section">
                    <h3 class="section-title">üìä Informasi Perusahaan</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companyName">Nama Perusahaan <span class="required">*</span></label>
                            <input type="text" id="companyName" name="companyName" required>
                        </div>
                        <div class="form-group">
                            <label for="industryType">Jenis Industri <span class="required">*</span></label>
                            <select id="industryType" name="industryType" required>
                                <option value="">Pilih Jenis Industri</option>
                                <option value="automotive">Otomotif</option>
                                <option value="electronics">Elektronik</option>
                                <option value="textile">Tekstil</option>
                                <option value="food">Makanan & Minuman</option>
                                <option value="chemical">Kimia</option>
                                <option value="machinery">Mesin & Peralatan</option>
                                <option value="pharmaceutical">Farmasi</option>
                                <option value="other">Lainnya</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companySize">Ukuran Perusahaan</label>
                            <select id="companySize" name="companySize">
                                <option value="">Pilih Ukuran</option>
                                <option value="small">Kecil (< 50 karyawan)</option>
                                <option value="medium">Menengah (50-250 karyawan)</option>
                                <option value="large">Besar (> 250 karyawan)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="operatingYears">Tahun Beroperasi</label>
                            <input type="number" id="operatingYears" name="operatingYears" min="1" max="100">
                        </div>
                    </div>
                </div>

                <!-- Metrik Produksi -->
                <div class="form-section">
                    <h3 class="section-title">üè≠ Metrik Produksi</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="monthlyOutput">Output Bulanan <span class="required">*</span></label>
                            <div class="input-group">
                                <input type="number" id="monthlyOutput" name="monthlyOutput" required min="0" step="0.01">
                                <span class="input-suffix">unit</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productionCapacity">Kapasitas Produksi <span class="required">*</span></label>
                            <div class="input-group">
                                <input type="number" id="productionCapacity" name="productionCapacity" required min="0" step="0.01">
                                <span class="input-suffix">unit/bulan</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="capacityUtilization">Utilisasi Kapasitas</label>
                            <div class="input-group">
                                <input type="number" id="capacityUtilization" name="capacityUtilization" min="0" max="100" step="0.1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productionEfficiency">Efisiensi Produksi</label>
                            <div class="input-group">
                                <input type="number" id="productionEfficiency" name="productionEfficiency" min="0" max="100" step="0.1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metrik Kualitas -->
                <div class="form-section">
                    <h3 class="section-title">‚úÖ Metrik Kualitas</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="defectRate">Tingkat Cacat</label>
                            <div class="input-group">
                                <input type="number" id="defectRate" name="defectRate" min="0" max="100" step="0.01">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="reworkRate">Tingkat Pengerjaan Ulang</label>
                            <div class="input-group">
                                <input type="number" id="reworkRate" name="reworkRate" min="0" max="100" step="0.01">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customerSatisfaction">Kepuasan Pelanggan</label>
                            <div class="input-group">
                                <input type="number" id="customerSatisfaction" name="customerSatisfaction" min="0" max="10" step="0.1">
                                <span class="input-suffix">/10</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="returnRate">Tingkat Pengembalian</label>
                            <div class="input-group">
                                <input type="number" id="returnRate" name="returnRate" min="0" max="100" step="0.01">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metrik Finansial -->
                <div class="form-section">
                    <h3 class="section-title">üí∞ Metrik Finansial</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="monthlyRevenue">Pendapatan Bulanan</label>
                            <div class="input-group">
                                <input type="number" id="monthlyRevenue" name="monthlyRevenue" min="0" step="1000000">
                                <span class="input-suffix">IDR</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productionCost">Biaya Produksi</label>
                            <div class="input-group">
                                <input type="number" id="productionCost" name="productionCost" min="0" step="1000000">
                                <span class="input-suffix">IDR</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="profitMargin">Margin Keuntungan</label>
                            <div class="input-group">
                                <input type="number" id="profitMargin" name="profitMargin" min="-100" max="100" step="0.1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="operationalCost">Biaya Operasional</label>
                            <div class="input-group">
                                <input type="number" id="operationalCost" name="operationalCost" min="0" step="1000000">
                                <span class="input-suffix">IDR</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metrik Operasional -->
                <div class="form-section">
                    <h3 class="section-title">‚öôÔ∏è Metrik Operasional</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="employeeCount">Jumlah Karyawan</label>
                            <input type="number" id="employeeCount" name="employeeCount" min="1">
                        </div>
                        <div class="form-group">
                            <label for="machineHours">Jam Operasi Mesin</label>
                            <div class="input-group">
                                <input type="number" id="machineHours" name="machineHours" min="0" step="0.1">
                                <span class="input-suffix">jam/hari</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="downtimeHours">Waktu Henti</label>
                            <div class="input-group">
                                <input type="number" id="downtimeHours" name="downtimeHours" min="0" step="0.1">
                                <span class="input-suffix">jam/bulan</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="maintenanceFreq">Frekuensi Maintenance</label>
                            <select id="maintenanceFreq" name="maintenanceFreq">
                                <option value="">Pilih Frekuensi</option>
                                <option value="daily">Harian</option>
                                <option value="weekly">Mingguan</option>
                                <option value="monthly">Bulanan</option>
                                <option value="quarterly">Triwulan</option>
                                <option value="annually">Tahunan</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Faktor Eksternal -->
                <div class="form-section">
                    <h3 class="section-title">üåç Faktor Eksternal</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="marketDemand">Permintaan Pasar</label>
                            <select id="marketDemand" name="marketDemand">
                                <option value="">Pilih Tingkat Permintaan</option>
                                <option value="very_low">Sangat Rendah</option>
                                <option value="low">Rendah</option>
                                <option value="moderate">Sedang</option>
                                <option value="high">Tinggi</option>
                                <option value="very_high">Sangat Tinggi</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="competitionLevel">Tingkat Kompetisi</label>
                            <select id="competitionLevel" name="competitionLevel">
                                <option value="">Pilih Tingkat Kompetisi</option>
                                <option value="very_low">Sangat Rendah</option>
                                <option value="low">Rendah</option>
                                <option value="moderate">Sedang</option>
                                <option value="high">Tinggi</option>
                                <option value="very_high">Sangat Tinggi</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="economicCondition">Kondisi Ekonomi</label>
                            <select id="economicCondition" name="economicCondition">
                                <option value="">Pilih Kondisi Ekonomi</option>
                                <option value="recession">Resesi</option>
                                <option value="slow_growth">Pertumbuhan Lambat</option>
                                <option value="stable">Stabil</option>
                                <option value="growth">Pertumbuhan</option>
                                <option value="boom">Boom</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="seasonality">Faktor Musiman</label>
                            <select id="seasonality" name="seasonality">
                                <option value="">Pilih Pengaruh Musiman</option>
                                <option value="none">Tidak Ada</option>
                                <option value="low">Rendah</option>
                                <option value="moderate">Sedang</option>
                                <option value="high">Tinggi</option>
                                <option value="very_high">Sangat Tinggi</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Catatan Tambahan -->
                <div class="form-section">
                    <h3 class="section-title">üìù Catatan Tambahan</h3>
                    <div class="form-group">
                        <label for="additionalNotes">Informasi Tambahan</label>
                        <textarea id="additionalNotes" name="additionalNotes" rows="4" placeholder="Masukkan informasi tambahan yang mungkin mempengaruhi performa manufaktur..."></textarea>
                        <div class="info-text">Opsional: Jelaskan kondisi khusus, tantangan, atau faktor lain yang relevan</div>
                    </div>
                </div>

                <div class="submit-container">
                    <button type="submit" class="submit-btn">üîÆ Prediksi Performa</button>
                    <button type="reset" class="reset-btn">üîÑ Reset Form</button>
                </div>
            </form>

            <!-- Hasil Prediksi -->
            <div id="predictionResult" class="prediction-result">
                <h3>üìà Hasil Prediksi Performa</h3>
                <div class="prediction-value" id="performanceScore">-</div>
                <p id="performanceCategory">-</p>
                <p id="recommendations">-</p>
            </div>
        </div>
    </div>

    <script>
        function handleSubmit(event) {
            event.preventDefault();
            
            // Simulasi prediksi (dalam implementasi nyata, ini akan mengirim data ke backend)
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());
            
            // Simulasi perhitungan skor performa
            let score = calculatePerformanceScore(data);
            
            // Tampilkan hasil
            displayPredictionResult(score);
        }

        function calculatePerformanceScore(data) {
            // Simulasi algoritma prediksi sederhana
            let score = 50; // Base score
            
            // Faktor produksi
            if (data.capacityUtilization) {
                score += (parseFloat(data.capacityUtilization) - 50) * 0.3;
            }
            
            if (data.productionEfficiency) {
                score += (parseFloat(data.productionEfficiency) - 50) * 0.4;
            }
            
            // Faktor kualitas
            if (data.defectRate) {
                score -= parseFloat(data.defectRate) * 2;
            }
            
            if (data.customerSatisfaction) {
                score += (parseFloat(data.customerSatisfaction) - 5) * 5;
            }
            
            // Faktor finansial
            if (data.profitMargin) {
                score += parseFloat(data.profitMargin) * 0.5;
            }
            
            // Faktor eksternal
            const demandMultiplier = {
                'very_low': -10,
                'low': -5,
                'moderate': 0,
                'high': 5,
                'very_high': 10
            };
            
            if (data.marketDemand && demandMultiplier[data.marketDemand]) {
                score += demandMultiplier[data.marketDemand];
            }
            
            // Batasi skor antara 0-100
            return Math.max(0, Math.min(100, Math.round(score)));
        }

        function displayPredictionResult(score) {
            const resultDiv = document.getElementById('predictionResult');
            const scoreElement = document.getElementById('performanceScore');
            const categoryElement = document.getElementById('performanceCategory');
            const recommendationsElement = document.getElementById('recommendations');
            
            scoreElement.textContent = score + '/100';
            
            let category, recommendations;
            
            if (score >= 80) {
                category = 'üü¢ Performa Sangat Baik';
                recommendations = 'Pertahankan standar operasional yang tinggi dan fokus pada inovasi berkelanjutan.';
                resultDiv.style.background = 'linear-gradient(135deg, #2ecc71 0%, #27ae60 100%)';
            } else if (score >= 60) {
                category = 'üü° Performa Baik';
                recommendations = 'Tingkatkan efisiensi operasional dan kurangi tingkat cacat produksi.';
                resultDiv.style.background = 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)';
            } else if (score >= 40) {
                category = 'üü† Performa Sedang';
                recommendations = 'Perlu perbaikan pada sistem produksi dan manajemen kualitas.';
                resultDiv.style.background = 'linear-gradient(135deg, #e67e22 0%, #d35400 100%)';
            } else {
                category = 'üî¥ Performa Rendah';
                recommendations = 'Diperlukan evaluasi menyeluruh dan perbaikan sistem operasional.';
                resultDiv.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
            }
            
            categoryElement.textContent = category;
            recommendationsElement.textContent = recommendations;
            
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Auto-calculate capacity utilization
        document.getElementById('monthlyOutput').addEventListener('input', calculateUtilization);
        document.getElementById('productionCapacity').addEventListener('input', calculateUtilization);

        function calculateUtilization() {
            const output = parseFloat(document.getElementById('monthlyOutput').value) || 0;
            const capacity = parseFloat(document.getElementById('productionCapacity').value) || 0;
            
            if (capacity > 0) {
                const utilization = (output / capacity) * 100;
                document.getElementById('capacityUtilization').value = utilization.toFixed(1);
            }
        }

        // Form validation
        document.getElementById('manufacturingForm').addEventListener('submit', function(e) {
            const requiredFields = this.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#e1e8ed';
                }
            });
            
            if (!isValid) {
                e.preventDefault();
                alert('Mohon lengkapi semua field yang wajib diisi (bertanda *)');
            }
        });
    </script>

<!-- Help Modal -->
<div id="helpModal" class="help-modal" style="display: none;">
    <div class="help-modal-content">
        <div class="help-header">
            <h2>üìã Panduan Pengisian Form</h2>
            <span class="help-close" onclick="toggleHelpModal()">&times;</span>
        </div>
        <div class="help-body">
            <!-- Quick Start Guide -->
            <div class="help-section">
                <h3>üöÄ Panduan Cepat - 5 Langkah Mudah</h3>
                <div class="quick-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <strong>Siapkan Data Perusahaan</strong><br>
                            Kumpulkan informasi dasar seperti nama perusahaan, jenis industri, dan ukuran perusahaan
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <strong>Hitung Metrik Produksi</strong><br>
                            Siapkan data output bulanan, kapasitas produksi, dan tingkat efisiensi
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <strong>Evaluasi Kualitas</strong><br>
                            Masukkan data tingkat cacat, kepuasan pelanggan, dan tingkat pengembalian
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <strong>Analisis Finansial</strong><br>
                            Input pendapatan, biaya produksi, dan margin keuntungan
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <strong>Klik Prediksi</strong><br>
                            Tekan tombol "Prediksi Performa" dan lihat hasil analisis
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Guide Sections -->
            <div class="help-section">
                <h3>üìä Informasi Perusahaan</h3>
                <div class="field-help">
                    <div class="field-item">
                        <strong>üè¢ Nama Perusahaan <span class="required">*</span></strong>
                        <p>Masukkan nama lengkap perusahaan manufaktur Anda.</p>
                        <div class="example">Contoh: PT Industri Manufaktur Indonesia, CV Karya Mandiri Sejahtera</div>
                    </div>
                    <div class="field-item">
                        <strong>üè≠ Jenis Industri <span class="required">*</span></strong>
                        <p>Pilih kategori industri yang paling sesuai:</p>
                        <ul>
                            <li><strong>Otomotif:</strong> Mobil, motor, suku cadang</li>
                            <li><strong>Elektronik:</strong> Komputer, smartphone, peralatan elektronik</li>
                            <li><strong>Tekstil:</strong> Pakaian, kain, produk tekstil</li>
                            <li><strong>Makanan & Minuman:</strong> Pengolahan makanan, minuman</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h3>üè≠ Metrik Produksi</h3>
                <div class="field-help">
                    <div class="field-item">
                        <strong>üì¶ Output Bulanan <span class="required">*</span></strong>
                        <p>Jumlah produk yang berhasil diproduksi dalam satu bulan (dalam unit).</p>
                        <div class="example">Contoh: Pabrik sepatu: 5000 pasang/bulan</div>
                    </div>
                    <div class="field-item">
                        <strong>üéØ Kapasitas Produksi <span class="required">*</span></strong>
                        <p>Maksimum produk yang dapat diproduksi dalam satu bulan jika beroperasi penuh.</p>
                        <div class="formula">Kapasitas mesin √ó Jam operasi √ó Hari kerja</div>
                    </div>
                    <div class="auto-calc">
                        <strong>üìä Utilisasi Kapasitas (Otomatis)</strong>
                        <div class="formula">Utilisasi = (Output Bulanan √∑ Kapasitas Produksi) √ó 100%</div>
                        <p>Field ini akan terisi otomatis saat Anda mengisi Output Bulanan dan Kapasitas Produksi.</p>
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h3>‚úÖ Metrik Kualitas</h3>
                <div class="field-help">
                    <div class="field-item">
                        <strong>‚ùå Tingkat Cacat</strong>
                        <p>Persentase produk cacat dari total produksi.</p>
                        <div class="formula">(Jumlah Produk Cacat √∑ Total Produksi) √ó 100%</div>
                        <div class="example">Contoh: 50 cacat dari 10.000 produk = 0.5%</div>
                    </div>
                    <div class="field-item">
                        <strong>üòä Kepuasan Pelanggan</strong>
                        <p>Rating kepuasan pelanggan dalam skala 1-10 dari survey, review online, atau feedback langsung.</p>
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h3>üí∞ Metrik Finansial</h3>
                <div class="field-help">
                    <div class="field-item">
                        <strong>üíµ Pendapatan Bulanan</strong>
                        <p>Total pendapatan kotor dari penjualan produk dalam satu bulan (dalam Rupiah).</p>
                        <div class="example">Contoh: 1000 unit √ó Rp 500.000 = Rp 500.000.000</div>
                    </div>
                    <div class="field-item">
                        <strong>üìà Margin Keuntungan</strong>
                        <div class="formula">Margin = ((Pendapatan - Total Biaya) √∑ Pendapatan) √ó 100%</div>
                        <p>Margin keuntungan industri manufaktur umumnya 10-25%</p>
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h3>üí° Tips Penting</h3>
                <div class="tips-grid">
                    <div class="tip-item">
                        <strong>üéØ Akurasi Data</strong>
                        <ul>
                            <li>Gunakan data aktual dari sistem ERP</li>
                            <li>Ambil rata-rata 3-6 bulan</li>
                            <li>Pastikan konsistensi satuan</li>
                        </ul>
                    </div>
                    <div class="tip-item">
                        <strong>‚ö†Ô∏è Hindari Kesalahan</strong>
                        <ul>
                            <li>Jangan campur data periode berbeda</li>
                            <li>Verifikasi perhitungan manual</li>
                            <li>Isi field wajib terlebih dahulu</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h3>üìã Checklist Sebelum Submit</h3>
                <div class="checklist">
                    <label><input type="checkbox"> Semua field wajib sudah terisi</label>
                    <label><input type="checkbox"> Data finansial sudah diverifikasi</label>
                    <label><input type="checkbox"> Perhitungan persentase sudah benar</label>
                    <label><input type="checkbox"> Satuan dan periode waktu konsisten</label>
                    <label><input type="checkbox"> Data eksternal sudah disesuaikan dengan kondisi terkini</label>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.help-modal {
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    backdrop-filter: blur(5px);
}

.help-modal-content {
    background-color: white;
    margin: 2% auto;
    border-radius: 15px;
    width: 90%;
    max-width: 900px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from { opacity: 0; transform: translateY(-50px); }
    to { opacity: 1; transform: translateY(0); }
}

.help-header {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    color: white;
    padding: 25px 30px;
    border-radius: 15px 15px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.help-header h2 {
    margin: 0;
    font-size: 1.8rem;
}

.help-close {
    font-size: 2rem;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 50%;
    transition: background 0.3s ease;
}

.help-close:hover {
    background: rgba(255,255,255,0.2);
}

.help-body {
    padding: 30px;
    max-height: 70vh;
    overflow-y: auto;
}

.help-section {
    margin-bottom: 35px;
    padding: 25px;
    border: 2px solid #f1f2f6;
    border-radius: 12px;
    background: #fafbfc;
}

.help-section h3 {
    color: #2c3e50;
    margin-bottom: 20px;
    font-size: 1.3rem;
    padding-bottom: 10px;
    border-bottom: 2px solid #3498db;
}

.quick-steps {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.step {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.step-number {
    background: #3498db;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.field-help {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.field-item {
    padding: 15px;
    background: white;
    border-radius: 8px;
    border-left: 4px solid #3498db;
}

.field-item strong {
    color: #2c3e50;
    display: block;
    margin-bottom: 8px;
}

.field-item p {
    margin-bottom: 10px;
    color: #555;
}

.field-item ul {
    margin: 10px 0;
    padding-left: 20px;
}

.field-item li {
    margin-bottom: 5px;
}

.example {
    background: #e8f5e8;
    padding: 10px;
    border-radius: 6px;
    border-left: 3px solid #27ae60;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    margin-top: 10px;
}

.formula {
    background: #fff3cd;
    padding: 10px;
    border-radius: 6px;
    border-left: 3px solid #ffc107;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    margin: 10px 0;
}

.auto-calc {
    background: #d1ecf1;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #17a2b8;
    margin-top: 15px;
}

.tips-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.tip-item {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.tip-item strong {
    color: #2c3e50;
    display: block;
    margin-bottom: 10px;
}

.tip-item ul {
    margin: 0;
    padding-left: 20px;
}

.tip-item li {
    margin-bottom: 5px;
    color: #555;
}

.checklist {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.checklist label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.checklist label:hover {
    background: #f8f9fa;
}

.checklist input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #3498db;
}

.required {
    color: #e74c3c;
    font-weight: 600;
}

@media (max-width: 768px) {
    .help-modal-content {
        width: 95%;
        margin: 5% auto;
    }
    
    .help-header {
        padding: 20px;
    }
    
    .help-header h2 {
        font-size: 1.5rem;
    }
    
    .help-body {
        padding: 20px;
    }
    
    .tips-grid {
        grid-template-columns: 1fr;
    }
    
    .quick-steps .step {
        flex-direction: column;
        text-align: center;
    }
}
</style>

<script>
function toggleHelpModal() {
    const modal = document.getElementById('helpModal');
    if (modal.style.display === 'none' || modal.style.display === '') {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
    } else {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto'; // Restore scrolling
    }
}

// Close modal when clicking outside of it
window.onclick = function(event) {
    const modal = document.getElementById('helpModal');
    if (event.target === modal) {
        toggleHelpModal();
    }
}

// Close modal with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const modal = document.getElementById('helpModal');
        if (modal.style.display === 'block') {
            toggleHelpModal();
        }
    }
});

// Add help tooltips to form fields
document.addEventListener('DOMContentLoaded', function() {
    // Add help icons to required fields
    const requiredFields = document.querySelectorAll('input[required], select[required]');
    requiredFields.forEach(field => {
        const helpIcon = document.createElement('span');
        helpIcon.innerHTML = ' ‚ùì';
        helpIcon.style.cursor = 'pointer';
        helpIcon.style.color = '#3498db';
        helpIcon.title = 'Klik tombol Bantuan untuk panduan lengkap';
        helpIcon.onclick = toggleHelpModal;
        
        const label = field.previousElementSibling;
        if (label && label.tagName === 'LABEL') {
            label.appendChild(helpIcon);
        }
    });
});
</script>
</body>
</html>
